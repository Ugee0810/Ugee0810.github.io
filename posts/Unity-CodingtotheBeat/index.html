<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Sync Objects With Music" /><meta property="og:locale" content="en" /><meta name="description" content="1 2 리듬 게임을 만드는 데 필요한 일부 프로그래밍에 대한 빠른 가이드입니다. Unity를 사용하여 게임을 빌드하지만 대부분의 엔진에 적용될 수 있습니다." /><meta property="og:description" content="1 2 리듬 게임을 만드는 데 필요한 일부 프로그래밍에 대한 빠른 가이드입니다. Unity를 사용하여 게임을 빌드하지만 대부분의 엔진에 적용될 수 있습니다." /><link rel="canonical" href="https://ugee0810.github.io//posts/Unity-CodingtotheBeat/" /><meta property="og:url" content="https://ugee0810.github.io//posts/Unity-CodingtotheBeat/" /><meta property="og:site_name" content="Ugee’s Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-14T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Sync Objects With Music" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="Ml2iJIkJ2zZDMNrcGMlCnS-Xedu1IYdjNWQKCAUzZKM" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-15T18:04:37+09:00","datePublished":"2022-09-14T00:00:00+09:00","description":"1 2 리듬 게임을 만드는 데 필요한 일부 프로그래밍에 대한 빠른 가이드입니다. Unity를 사용하여 게임을 빌드하지만 대부분의 엔진에 적용될 수 있습니다.","headline":"Sync Objects With Music","mainEntityOfPage":{"@type":"WebPage","@id":"https://ugee0810.github.io//posts/Unity-CodingtotheBeat/"},"url":"https://ugee0810.github.io//posts/Unity-CodingtotheBeat/"}</script><title>Sync Objects With Music | Ugee's Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ugee's Tech Blog"><meta name="application-name" content="Ugee's Tech Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ugee's Tech Blog</a></div><div class="site-subtitle font-italic">Rearning to C# / Unity 21.3.x</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Ugee0810" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['shu990810','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Sync Objects With Music</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Sync Objects With Music</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1663081200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 14, 2022 </em> </span> <span> Updated <em class="" data-ts="1663232677" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 15, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/Ugee0810">송환욱(Song HwanUK)</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1116 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>리듬 게임을 만드는 데 필요한 일부 프로그래밍에 대한 빠른 가이드입니다.
Unity를 사용하여 게임을 빌드하지만 대부분의 엔진에 적용될 수 있습니다.
</pre></table></code></div></div><h1 id="오디오-클립으로부터-bpm-추출하기">오디오 클립으로부터 BPM 추출하기</h1><p>내용은 간단한 일본어였지만, 아무튼 공부를 해둔 것이 도움이 됐다. 다음부턴 자주 일본어로 검색해봐야겠다. ㅎㅎ</p><ul><li><a href="https://github.com/WestHillApps/UniBpmAnalyzer">UniBpmAnalyzer</a></ul><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
</pre><td class="rouge-code"><pre><span class="cm">/*
UniBpmAnalyzer
Copyright (c) 2016 WestHillApps (Hironari Nishioka)
This software is released under the MIT License.
http://opensource.org/licenses/mit-license.php
*/</span>

<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">UniBpmAnalyzer</span>
<span class="p">{</span>
    <span class="err">#</span><span class="n">region</span> <span class="n">CONST</span>

    <span class="c1">// BPM search range</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">MIN_BPM</span> <span class="p">=</span> <span class="m">60</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">MAX_BPM</span> <span class="p">=</span> <span class="m">400</span><span class="p">;</span>
    <span class="c1">// Base frequency (44.1kbps)</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">BASE_FREQUENCY</span> <span class="p">=</span> <span class="m">44100</span><span class="p">;</span>
    <span class="c1">// Base channels (2ch)</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">BASE_CHANNELS</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
    <span class="c1">// Base split size of sample data (case of 44.1kbps &amp; 2ch)</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">BASE_SPLIT_SAMPLE_SIZE</span> <span class="p">=</span> <span class="m">2205</span><span class="p">;</span>

    <span class="err">#</span><span class="n">endregion</span>

    <span class="k">public</span> <span class="k">struct</span> <span class="nc">BpmMatchData</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">bpm</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">match</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="n">BpmMatchData</span><span class="p">[]</span> <span class="n">bpmMatchDatas</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BpmMatchData</span><span class="p">[</span><span class="n">MAX_BPM</span> <span class="p">-</span> <span class="n">MIN_BPM</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// Analyze BPM from an audio clip</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;param name="clip"&gt;target audio clip&lt;/param&gt;</span>
    <span class="c1">/// &lt;returns&gt;bpm&lt;/returns&gt;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">int</span> <span class="nf">AnalyzeBpm</span><span class="p">(</span><span class="n">AudioClip</span> <span class="n">clip</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">bpmMatchDatas</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">bpmMatchDatas</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">match</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">clip</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"AnalyzeBpm audioClipName : "</span> <span class="p">+</span> <span class="n">clip</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">frequency</span> <span class="p">=</span> <span class="n">clip</span><span class="p">.</span><span class="n">frequency</span><span class="p">;</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Frequency : "</span> <span class="p">+</span> <span class="n">frequency</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">channels</span> <span class="p">=</span> <span class="n">clip</span><span class="p">.</span><span class="n">channels</span><span class="p">;</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Channels : "</span> <span class="p">+</span> <span class="n">channels</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">splitFrameSize</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">FloorToInt</span><span class="p">(((</span><span class="kt">float</span><span class="p">)</span><span class="n">frequency</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">BASE_FREQUENCY</span><span class="p">)</span> <span class="p">*</span> <span class="p">((</span><span class="kt">float</span><span class="p">)</span><span class="n">channels</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">BASE_CHANNELS</span><span class="p">)</span> <span class="p">*</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">BASE_SPLIT_SAMPLE_SIZE</span><span class="p">);</span>

        <span class="c1">// Get all sample data from audioclip</span>
        <span class="kt">var</span> <span class="n">allSamples</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">float</span><span class="p">[</span><span class="n">clip</span><span class="p">.</span><span class="n">samples</span> <span class="p">*</span> <span class="n">channels</span><span class="p">];</span>
        <span class="n">clip</span><span class="p">.</span><span class="nf">GetData</span><span class="p">(</span><span class="n">allSamples</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>

        <span class="c1">// Create volume array from all sample data</span>
        <span class="kt">var</span> <span class="n">volumeArr</span> <span class="p">=</span> <span class="nf">CreateVolumeArray</span><span class="p">(</span><span class="n">allSamples</span><span class="p">,</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">splitFrameSize</span><span class="p">);</span>

        <span class="c1">// Search bpm from volume array</span>
        <span class="kt">int</span> <span class="n">bpm</span> <span class="p">=</span> <span class="nf">SearchBpm</span><span class="p">(</span><span class="n">volumeArr</span><span class="p">,</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">splitFrameSize</span><span class="p">);</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Matched BPM : "</span> <span class="p">+</span> <span class="n">bpm</span><span class="p">);</span>

        <span class="kt">var</span> <span class="n">strBuilder</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">(</span><span class="s">"BPM Match Data List\n"</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">bpmMatchDatas</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">strBuilder</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"bpm : "</span> <span class="p">+</span> <span class="n">bpmMatchDatas</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">bpm</span> <span class="p">+</span> <span class="s">", match : "</span> <span class="p">+</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">FloorToInt</span><span class="p">(</span><span class="n">bpmMatchDatas</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">match</span> <span class="p">*</span> <span class="m">10000f</span><span class="p">)</span> <span class="p">+</span> <span class="s">"\n"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">strBuilder</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>

        <span class="k">return</span> <span class="n">bpm</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// Create volume array from all sample data</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">private</span> <span class="k">static</span> <span class="kt">float</span><span class="p">[]</span> <span class="nf">CreateVolumeArray</span><span class="p">(</span><span class="kt">float</span><span class="p">[]</span> <span class="n">allSamples</span><span class="p">,</span> <span class="kt">int</span> <span class="n">frequency</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">splitFrameSize</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Initialize volume array</span>
        <span class="kt">var</span> <span class="n">volumeArr</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">float</span><span class="p">[</span><span class="n">Mathf</span><span class="p">.</span><span class="nf">CeilToInt</span><span class="p">((</span><span class="kt">float</span><span class="p">)</span><span class="n">allSamples</span><span class="p">.</span><span class="n">Length</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">splitFrameSize</span><span class="p">)];</span>
        <span class="kt">int</span> <span class="n">powerIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

        <span class="c1">// Sample data analysis start</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">sampleIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">sampleIndex</span> <span class="p">&lt;</span> <span class="n">allSamples</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">sampleIndex</span> <span class="p">+=</span> <span class="n">splitFrameSize</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">sum</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">frameIndex</span> <span class="p">=</span> <span class="n">sampleIndex</span><span class="p">;</span> <span class="n">frameIndex</span> <span class="p">&lt;</span> <span class="n">sampleIndex</span> <span class="p">+</span> <span class="n">splitFrameSize</span><span class="p">;</span> <span class="n">frameIndex</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">allSamples</span><span class="p">.</span><span class="n">Length</span> <span class="p">&lt;=</span> <span class="n">frameIndex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// Use the absolute value, because left and right value is -1 to 1</span>
                <span class="kt">float</span> <span class="n">absValue</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Abs</span><span class="p">(</span><span class="n">allSamples</span><span class="p">[</span><span class="n">frameIndex</span><span class="p">]);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">absValue</span> <span class="p">&gt;</span> <span class="m">1f</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">continue</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="c1">// Calculate the amplitude square sum</span>
                <span class="n">sum</span> <span class="p">+=</span> <span class="p">(</span><span class="n">absValue</span> <span class="p">*</span> <span class="n">absValue</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// Set volume value</span>
            <span class="n">volumeArr</span><span class="p">[</span><span class="n">powerIndex</span><span class="p">]</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Sqrt</span><span class="p">(</span><span class="n">sum</span> <span class="p">/</span> <span class="n">splitFrameSize</span><span class="p">);</span>
            <span class="n">powerIndex</span><span class="p">++;</span>
        <span class="p">}</span>

        <span class="c1">// Representing a volume value from 0 to 1</span>
        <span class="kt">float</span> <span class="n">maxVolume</span> <span class="p">=</span> <span class="n">volumeArr</span><span class="p">.</span><span class="nf">Max</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">volumeArr</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">volumeArr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">volumeArr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">/</span> <span class="n">maxVolume</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">volumeArr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// Search bpm from volume array</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">private</span> <span class="k">static</span> <span class="kt">int</span> <span class="nf">SearchBpm</span><span class="p">(</span><span class="kt">float</span><span class="p">[]</span> <span class="n">volumeArr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">frequency</span><span class="p">,</span> <span class="kt">int</span> <span class="n">splitFrameSize</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Create volume diff list</span>
        <span class="kt">var</span> <span class="n">diffList</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">volumeArr</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">diffList</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">Mathf</span><span class="p">.</span><span class="nf">Max</span><span class="p">(</span><span class="n">volumeArr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">-</span> <span class="n">volumeArr</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="m">0f</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="c1">// Calculate the degree of coincidence in each BPM</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">splitFrequency</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">frequency</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">splitFrameSize</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">bpm</span> <span class="p">=</span> <span class="n">MIN_BPM</span><span class="p">;</span> <span class="n">bpm</span> <span class="p">&lt;=</span> <span class="n">MAX_BPM</span><span class="p">;</span> <span class="n">bpm</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">sinMatch</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">cosMatch</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">bps</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">bpm</span> <span class="p">/</span> <span class="m">60f</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">diffList</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">diffList</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                <span class="p">{</span>
                    <span class="n">sinMatch</span> <span class="p">+=</span> <span class="p">(</span><span class="n">diffList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">*</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Cos</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">2f</span> <span class="p">*</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">PI</span> <span class="p">*</span> <span class="n">bps</span> <span class="p">/</span> <span class="n">splitFrequency</span><span class="p">));</span>
                    <span class="n">cosMatch</span> <span class="p">+=</span> <span class="p">(</span><span class="n">diffList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">*</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Sin</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">2f</span> <span class="p">*</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">PI</span> <span class="p">*</span> <span class="n">bps</span> <span class="p">/</span> <span class="n">splitFrequency</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="n">sinMatch</span> <span class="p">*=</span> <span class="p">(</span><span class="m">1f</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">diffList</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>
                <span class="n">cosMatch</span> <span class="p">*=</span> <span class="p">(</span><span class="m">1f</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">diffList</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">float</span> <span class="n">match</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Sqrt</span><span class="p">((</span><span class="n">sinMatch</span> <span class="p">*</span> <span class="n">sinMatch</span><span class="p">)</span> <span class="p">+</span> <span class="p">(</span><span class="n">cosMatch</span> <span class="p">*</span> <span class="n">cosMatch</span><span class="p">));</span>

            <span class="n">bpmMatchDatas</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">bpm</span> <span class="p">=</span> <span class="n">bpm</span><span class="p">;</span>
            <span class="n">bpmMatchDatas</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">match</span> <span class="p">=</span> <span class="n">match</span><span class="p">;</span>
            <span class="n">index</span><span class="p">++;</span>
        <span class="p">}</span>

        <span class="c1">// Returns a high degree of coincidence BPM</span>
        <span class="kt">int</span> <span class="n">matchIndex</span> <span class="p">=</span> <span class="n">Array</span><span class="p">.</span><span class="nf">FindIndex</span><span class="p">(</span><span class="n">bpmMatchDatas</span><span class="p">,</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">match</span> <span class="p">==</span> <span class="n">bpmMatchDatas</span><span class="p">.</span><span class="nf">Max</span><span class="p">(</span><span class="n">y</span> <span class="p">=&gt;</span> <span class="n">y</span><span class="p">.</span><span class="n">match</span><span class="p">));</span>

        <span class="k">return</span> <span class="n">bpmMatchDatas</span><span class="p">[</span><span class="n">matchIndex</span><span class="p">].</span><span class="n">bpm</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>사용법은 UniBpmAnalyzer 클래스의 AnalyzeBpm 함수의 인자로 추출할 오디오 소스 클립을 넣게 되면, BPM을 추출할 수 있다.</p><p>매우 간단하다.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Example</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">AudioClip</span> <span class="n">clip</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">bpm</span> <span class="p">=</span> <span class="n">UniBpmAnalyzer</span><span class="p">.</span><span class="nf">AnalyzeBpm</span><span class="p">(</span> <span class="n">clip</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>이제 추출한 bpm에서 계산된 비트의 초당 지속 시간을 제공하는 secPerBeat 전역 변수를 선언해줍니다.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">//The number of seconds for each song beat</span>
<span class="kt">float</span> <span class="n">secPerBeat</span> <span class="p">=</span> <span class="m">60</span> <span class="p">/</span> <span class="n">bpm</span><span class="p">;</span>
</pre></table></code></div></div><hr /><h1 id="참고-사이트">참고 사이트</h1><ul><li><a href="https://www.reddit.com/r/gamedev/comments/2fxvk4/heres_a_quick_and_dirty_guide_i_just_wrote_how_to/">Here’s a quick and dirty guide I just wrote: How To Make A Rhythm Game</a><li><a href="https://www.gamedeveloper.com/audio/coding-to-the-beat---under-the-hood-of-a-rhythm-game-in-unity">Coding to the Beat - Under the Hood of a Rhythm Game in Unity</a><li><a href="https://www.gamedeveloper.com/programming/music-syncing-in-rhythm-games">Music Syncing in Rhythm Games</a><li><a href="https://docs.unity3d.com/ScriptReference/AudioSettings-dspTime.html">docs.unity3d.com / AudioSettings.dspTime</a><li><a href="https://baba-s.hatenablog.com/entry/2018/02/16/085900">AudioClip から BPM を取得できる「UniBpmAnalyzer」紹介</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/unity/'>Unity</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/unity/" class="post-tag no-text-decoration" >Unity</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Sync+Objects+With+Music+-+Ugee%27s+Tech+Blog&url=https%3A%2F%2Fugee0810.github.io%2F%2Fposts%2FUnity-CodingtotheBeat%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Sync+Objects+With+Music+-+Ugee%27s+Tech+Blog&u=https%3A%2F%2Fugee0810.github.io%2F%2Fposts%2FUnity-CodingtotheBeat%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fugee0810.github.io%2F%2Fposts%2FUnity-CodingtotheBeat%2F&text=Sync+Objects+With+Music+-+Ugee%27s+Tech+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Ugee0810/Ugee0810.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Algorithm-2/">Algorithm#02 | 버블 정렬(Bubble Sort)</a><li><a href="/posts/Algorithm-3/">Algorithm#03 | 삽입 정렬(Insertion Sort)</a><li><a href="/posts/Algorithm-1/">Algorithm#01 | 선택 정렬(Selection Sort)</a><li><a href="/posts/Algorithm-4/">Algorithm#04 | 퀵 정렬(Quick Sort)</a><li><a href="/posts/Unity-Event-2-Action/">Unity Event 2 - Action</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/unity/">Unity</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a> <a class="post-tag" href="/tags/grammar/">Grammar</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object Oriented Programming</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/boj/">BOJ</a> <a class="post-tag" href="/tags/cordingtest/">CordingTest</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Data-Structure-01/"><div class="card-body"> <em class="small" data-ts="1662476400" data-df="ll" > Sep 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C# Data Structure#01 | Collections 자료구조 정리</h3><div class="text-muted small"><p> 자료구조의 중요성 자료구조는 데이터를 메모리에 저장하는것입니다. 데이터량이 많을 때 목적에 맞는 자료구조를 사용하지 않으면 엄청난 비용(속도, 메모리 낭비)의 손실을 가져오거나 심지어 프로그램, 서버가 다운될 수도 있습니다. 데이터가 빈번하게 추가되거나 선입선출 등의 우선순위가 있거나 특정 값(Key)로 데이터를 뽑아올 경우가 있거나 등의 목적에 ...</p></div></div></a></div><div class="card"> <a href="/posts/Grammar-01/"><div class="card-body"> <em class="small" data-ts="1662562800" data-df="ll" > Sep 8, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C# Grammar#01 | Switch</h3><div class="text-muted small"><p> Switch if - else 반복 줄임 가독성 높임 switch(n) 인수로는 기본적으로 정수와 문자를 넣을 수 있음 최근 C# 에서는 다른 타입의 객체도 넣을 수 있게끔 개선됐다. int choice = 0; switch(choice) { case 0: Console.Writ...</p></div></div></a></div><div class="card"> <a href="/posts/Grammar-02/"><div class="card-body"> <em class="small" data-ts="1662562800" data-df="ll" > Sep 8, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C# Grammar#02 | enum</h3><div class="text-muted small"><p> enum 열거형 -&amp;gt; 같은 종류의 상수 모음 상수나 변수를 사용하는 이유 상수 리터럴을 통한 하드 코딩은 그 의미를 알기 쉽지 않고 리팩토링이 어렵기 때문에. enum 열거형을 사용하는 이유 상수이므로 의미를 알기 쉽다. 연관된 것들을 하나의 enum 으로 묶기 때...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Diary-220908/" class="btn btn-outline-primary" prompt="Older"><p>22-09-08(목)</p></a> <a href="/posts/Unity-OnEnable/" class="btn btn-outline-primary" prompt="Newer"><p>OnEnable 함수를 이용한 점수 시스템 구현</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/Ugee0810">송환욱(Song HwanUK)</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/unity/">Unity</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a> <a class="post-tag" href="/tags/grammar/">Grammar</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object Oriented Programming</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/boj/">BOJ</a> <a class="post-tag" href="/tags/cordingtest/">CordingTest</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5PMP919232"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5PMP919232'); }); </script>
