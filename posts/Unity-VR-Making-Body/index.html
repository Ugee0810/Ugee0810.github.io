<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Unity VR Making Body(바디 리깅 구현하기)" /><meta property="og:locale" content="en" /><meta name="description" content="통상적으로 모든 3D 캐릭터에게 적용이 가능함" /><meta property="og:description" content="통상적으로 모든 3D 캐릭터에게 적용이 가능함" /><link rel="canonical" href="https://ugee0810.github.io//posts/Unity-VR-Making-Body/" /><meta property="og:url" content="https://ugee0810.github.io//posts/Unity-VR-Making-Body/" /><meta property="og:site_name" content="Ugee’s Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-28T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Unity VR Making Body(바디 리깅 구현하기)" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="Ml2iJIkJ2zZDMNrcGMlCnS-Xedu1IYdjNWQKCAUzZKM" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-28T15:29:04+09:00","datePublished":"2022-09-28T00:00:00+09:00","description":"통상적으로 모든 3D 캐릭터에게 적용이 가능함","headline":"Unity VR Making Body(바디 리깅 구현하기)","mainEntityOfPage":{"@type":"WebPage","@id":"https://ugee0810.github.io//posts/Unity-VR-Making-Body/"},"url":"https://ugee0810.github.io//posts/Unity-VR-Making-Body/"}</script><title>Unity VR Making Body(바디 리깅 구현하기) | Ugee's Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ugee's Tech Blog"><meta name="application-name" content="Ugee's Tech Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ugee's Tech Blog</a></div><div class="site-subtitle font-italic">Rearning to C# / Unity 21.3.x</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Ugee0810" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['shu990810','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Unity VR Making Body(바디 리깅 구현하기)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Unity VR Making Body(바디 리깅 구현하기)</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1664290800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 28, 2022 </em> </span> <span> Updated <em class="" data-ts="1664346544" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 28, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/Ugee0810">송환욱(Song HwanUK)</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2310 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p>통상적으로 모든 3D 캐릭터에게 적용이 가능함</p><p>사용 중인 유니티 버전이 2019.2 버전 이상이어야 한다.</p><p>프로젝트에 이용할 3D 캐릭터를 준비한다.</p><p>예시에서는 ‘Space Robot Kyle’에셋을 사용한다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192690399-b42735f3-14b7-4733-9689-fc15f6098db2.png" alt="image" data-proofer-ignore></p><p>또 ‘Animation Rigging’패키지를 설치한다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192690167-8c097721-5bf8-475b-8be5-e35a8501219b.png" alt="image" data-proofer-ignore></p><p>3D 캐릭터의 메쉬 데이터와 골격, 애니메이션이 포함되어 있다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192690755-b153692b-ce39-4df1-8e1a-291f409fefe1.png" alt="image" data-proofer-ignore></p><p>관절의 각 부위를 회전하는 건 가능하다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192690953-d18ae242-bd4c-4161-b921-a9d4b6d29a79.png" alt="image" data-proofer-ignore></p><p>하지만 애니메이션 리깅 패키지가 없다면 트랜스폼을 변경했을 때 관절이 분리되는 문제가 발생한다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192691081-4c6bc3a1-8212-40a8-b62e-bb210668abb7.png" alt="image" data-proofer-ignore></p><p>모든 관절이 정상이라면 이제 최상위 부모로 돌아가 Rig Builder 스크립트를 가져온다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192691272-dc19c23c-2596-450e-891d-7dbdf1dadd32.png" alt="image" data-proofer-ignore></p><p>아래에 새로 생긴 애니메이터 컴포넌트를 이용하므로 애니메이션 컴포넌트는 삭제해준다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192691405-67477f69-077f-4e2d-8d67-5a4989fa7e9e.png" alt="image" data-proofer-ignore></p><p>그리고 캐릭터의 뼈대 구조를 더 나은 방식으로 표시하는 Bone Renderer 스크립트를 컴포넌트로 불러온다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192691616-a1df5bbb-d5f9-4dda-8dd9-99279b13772b.png" alt="image" data-proofer-ignore></p><p>사용 방법은 아래의 트랜스폼 배열에 모든 관절들을 적용한다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192691785-8b8e63bd-3bf6-4abe-9c2b-936ee17782aa.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/85896566/192691948-b0f85423-fe1d-4e17-b2d3-a5a85d51ed6b.png" alt="image" data-proofer-ignore></p><p>이렇게 관절 구조가 연결되어 있는 모습을 확인할 수 있다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192692158-a45e3dd1-e6b4-417f-b1e8-575589538aab.png" alt="image" data-proofer-ignore></p><p>이후 최상위 부모에게 빈 오즈젝트를 VR Constraints(VR 제약조건)이라는 이름으로 생성해준다. 그리고 컴포넌트로 Rig 스크립트를 넣어주고, 부모의 Rig Builder 컴포넌트에 드래그&amp;드랍해준다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192692522-dabf94f4-f198-4fae-a8d2-a4a8b6183e46.png" alt="image" data-proofer-ignore> <img data-src="https://user-images.githubusercontent.com/85896566/192692610-ab5cd011-6f0e-48c6-98fe-01e2eefb34f2.png" alt="image" data-proofer-ignore> <img data-src="https://user-images.githubusercontent.com/85896566/192692766-2f7b21b2-c2a3-4a8f-93fa-7e08cf6a0841.png" alt="image" data-proofer-ignore></p><p>또, VR Constraints의 하위로 빈 오젝트를 만들어 아래와 같이 세팅해준다. 이것이 이동을 담당해주는 구서 요소가 된다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192692901-1d6aedc0-f126-4aa4-8b3a-9b87e32246b6.png" alt="image" data-proofer-ignore></p><p>이제 컴포넌트에 하나씩 추가 해주는데, 좌물쇠를 걸어두고 씬 뷰에 표시된 관절선 중 필요한 관절을 클릭해서 확인한다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192693378-d91e710c-a63b-4142-922b-41a8764a4bff.png" alt="image" data-proofer-ignore></p><p>아래의 타겟과 힌트 트랜스폼이 남았다. 먼저 Right Arm IK의 하위로 빈 오브젝트 두 개를 생성해준다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192693639-6941b000-c10c-4f15-9960-37764187491d.png" alt="image" data-proofer-ignore></p><p>타겟 개체를 선택하고 Shift를 누른 상태로 대상을 배치 할 뼈를 선택합니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192693860-2c286f41-09c4-428c-9348-5aaafaa6e40b.png" alt="image" data-proofer-ignore></p><p>이젠 애니메이션 리깅 단계입니다. 아래의 속성을 클릭하면 타겟 게임 오브젝트와 손 뼈의 위치가 일치하는 것을 볼 수 있습니다. 힌트 게임 오브젝트도 오른쪽 팔꿈치와 같이 잡고 똑같은 작업을 해줍니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192693965-b4a3939f-0a16-4c87-be41-a8f29d57c043.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/85896566/192694034-d8e0ca72-991d-4d66-b059-5fbc7bd0af4b.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/85896566/192694269-fadab3f7-a7c8-4085-9b7f-caf40a6d6012.png" alt="image" data-proofer-ignore></p><p>이제 플레이 해봅니다. 타겟과 힌트의 트랜스폼을 변경하면 붙은 관절들이 같이 움직이는 걸 볼 수 있습니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192694441-d6513884-bdca-4a8f-b753-0c100b23a9c8.png" alt="image" data-proofer-ignore></p><p>성공했다면 이제 왼쪽 팔도 동일하게 적용 하면 됩니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192694957-ceb02dfb-03ea-48d7-8140-0fb29ac5ad09.png" alt="image" data-proofer-ignore></p><p>이 단계에서 다리에도 동일한 작업을 수행하고 애니메이션을 사용할 수 있습니다.</p><p>이번엔 머리를 구성할 차례입니다. 머리를 구성하게 된 다면 훨씬 자유로운 느낌을 줄 수 있습니다.</p><p>VR Constraints의 하위로 Head Constraint 이름의 빈 오브젝트를 생성한 뒤 Multi Parent Constraint 스크립트를 컴포넌트로 추가해줍니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192695622-8ca3db39-b7c5-4b55-92d8-347fa535b334.png" alt="image" data-proofer-ignore></p><p>마찬가지로 좌물쇠를 걸고 헤드를 찾아 제약 오브젝트에 걸어줍니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192695754-e2b18764-4723-43d9-907d-f8ada4ca23cd.png" alt="image" data-proofer-ignore></p><p>Source Objects에는 자신(Head Constraint가 들어갑니다.)</p><p>이후 Head와 같이 잡고 Align Transform 해줍니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192696277-ab9e7e18-565c-42e5-b391-23d965fdf0fe.png" alt="image" data-proofer-ignore></p><p>하지만 아직 머리가 한 없이 한 방향으로 돌아간다거나 팔 관절과 자연스러운 운동이 안되는 문제가 있습니다.</p><p>부모에게 돌아가 VRRig스크립트를 생성해줍니다.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="c1">/// VRRig.cs</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">VRRig</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// Add Call Add 제약을 위한 두 개의 실행 가능한 필록 전송 변수</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">headConstraint</span><span class="p">;</span>

    <span class="c1">// 머리와 몸체 사이의 초기 위치 차이가 될 집합 변수</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">headBodyOffset</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 최초에 위치 변환을 해준다.</span>
        <span class="n">headBodyOffset</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">headConstraint</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 머리 위치에 따라 몸체는 수시로 변화한다.</span>
        <span class="c1">// 머리의 위치에 오프셋을 추가한 포지션 값을 부모에게 전달한다.</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">headConstraint</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">headBodyOffset</span><span class="p">;</span>

        <span class="c1">// 이 부분은 3D 캐릭터의 헤드 축에 따라서 수시로 변경되어야 한다.</span>
        <span class="c1">// Robot Kyle의 경우 머리는 정면이 녹색(y)축이므로 걸음에 up을 넣어준다.</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">ProjectOnPlane</span><span class="p">(</span><span class="n">headConstraint</span><span class="p">.</span><span class="n">up</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>스크립트를 적용하고 플레이 해봅니다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192697999-86bf3cb5-ad98-4062-b0a3-84fb6bcd37a4.png" alt="image" data-proofer-ignore></p><p>그렇게 되면 한없이 앞으로 달려가는 걸 볼 수 있습니다. 하지만 이 것이 정상적으로 완성된 모습입니다. 왜냐하면 머리와 함께 몸을 움직였기 때문입니다.</p><p>앞으로 해결해야 할 부분은 항상 머리의 위치를 조정하고 나중에 컨트롤러와 플레이어 세트와 일치하도록 해야합니다.</p><p>스크립트를 다음과 같이 변경합니다.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="c1">/// VRRig.cs</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="c1">// 직렬화를 통해 다른 클래스도 인스펙터창에서 확인</span>
<span class="p">[</span><span class="n">System</span><span class="p">.</span><span class="n">Serializable</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">VRMap</span>
<span class="p">{</span>
    <span class="c1">// VR 타겟이라는 VR 변환을 위해 실행 가능한 클래스 4가지</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">vrTarget</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rigTarget</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">trackingPositionOffset</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">trackingRotationOffset</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Map</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">rigTarget</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">vrTarget</span><span class="p">.</span><span class="nf">TransformPoint</span><span class="p">(</span><span class="n">trackingPositionOffset</span><span class="p">);</span>
        <span class="n">rigTarget</span><span class="p">.</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">vrTarget</span><span class="p">.</span><span class="n">rotation</span> <span class="p">*</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">Euler</span><span class="p">(</span><span class="n">trackingRotationOffset</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">VRRig</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">VRMap</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">VRMap</span> <span class="n">leftHand</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">VRMap</span> <span class="n">rightHand</span><span class="p">;</span>

    <span class="c1">// Add Call Add 제약을 위한 두 개의 실행 가능한 필록 전송 변수</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">headConstraint</span><span class="p">;</span>

    <span class="c1">// 머리와 몸체 사이의 초기 위치 차이가 될 집합 변수</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">headBodyOffset</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 최초에 위치 변환을 해준다.</span>
        <span class="n">headBodyOffset</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">headConstraint</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 머리 위치에 따라 몸체는 수시로 변화한다.</span>
        <span class="c1">// 머리의 위치에 오프셋을 추가한 포지션 값을 부모에게 전달한다.</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">headConstraint</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">headBodyOffset</span><span class="p">;</span>

        <span class="c1">// 이 부분은 3D 캐릭터의 헤드 축에 따라서 수시로 변경되어야 한다.</span>
        <span class="c1">// Robot Kyle의 경우 머리는 정면이 녹색(y)축이므로 걸음에 up을 넣어준다.</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">ProjectOnPlane</span><span class="p">(</span><span class="n">headConstraint</span><span class="p">.</span><span class="n">up</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">).</span><span class="n">normalized</span><span class="p">;</span>

        <span class="n">head</span><span class="p">.</span><span class="nf">Map</span><span class="p">();</span>
        <span class="n">leftHand</span><span class="p">.</span><span class="nf">Map</span><span class="p">();</span>
        <span class="n">rightHand</span><span class="p">.</span><span class="nf">Map</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>이후 컴포넌트에서 연결해주고 나서 연결할 때 XRI 기준으로 아래와 같이 하면 될 거 같다. 나중엔 오프셋에 넣어서 만들면 될 거 같다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192700278-acb25cd0-5155-48d1-8ae8-97266a82cef6.png" alt="image" data-proofer-ignore></p><p>아래의 사진은 본체에 가려서 앞을 못 보는 것을 오프셋으로 조정하는 것이고, 또한 목이 돌아가 있는 부분도 모델 기준으로 회전값을 넣은 것이다. 그리고 손도 자연스럽게 보정해준 값이다.</p><p><img data-src="https://user-images.githubusercontent.com/85896566/192700838-942d731f-c9ac-4ede-bee0-8ffd0951503b.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/85896566/192701083-33eb3d51-ca95-4f1c-9a4c-c56a11379c73.png" alt="image" data-proofer-ignore></p><p>아직 개선할 부분으로 캐릭터 팔이 다 뻗을 수 있도록 실제 팔 길이와 캐릭터의 팔 길이를 맞춰주어야 합니다. 이는 캐릭터의 크기를 키우는 방법으로 해결할 수 있습니다. 스크립트를 아래와 같이 수정하면 더 자연스러운 결과를 볼 수 있습니다.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="c1">// 직렬화를 통해 다른 클래스도 인스펙터창에서 확인</span>
<span class="p">[</span><span class="n">System</span><span class="p">.</span><span class="n">Serializable</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">VRMap</span>
<span class="p">{</span>
    <span class="c1">// VR 타겟이라는 VR 변환을 위해 실행 가능한 클래스 4가지</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">vrTarget</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">rigTarget</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">trackingPositionOffset</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">trackingRotationOffset</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Map</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">rigTarget</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">vrTarget</span><span class="p">.</span><span class="nf">TransformPoint</span><span class="p">(</span><span class="n">trackingPositionOffset</span><span class="p">);</span>
        <span class="n">rigTarget</span><span class="p">.</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">vrTarget</span><span class="p">.</span><span class="n">rotation</span> <span class="p">*</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">Euler</span><span class="p">(</span><span class="n">trackingRotationOffset</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">VRRig</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">VRMap</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">VRMap</span> <span class="n">leftHand</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">VRMap</span> <span class="n">rightHand</span><span class="p">;</span>

    <span class="c1">// Add Call Add 제약을 위한 두 개의 실행 가능한 필록 전송 변수</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">headConstraint</span><span class="p">;</span>

    <span class="c1">// 머리와 몸체 사이의 초기 위치 차이가 될 집합 변수</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">headBodyOffset</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">turnSmoothness</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span> 
    <span class="p">{</span>
        <span class="c1">// 최초에 위치 변환을 해준다.</span>
        <span class="n">headBodyOffset</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">headConstraint</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 머리 위치에 따라 몸체는 수시로 변화한다.</span>
        <span class="c1">// 머리의 위치에 오프셋을 추가한 포지션 값을 부모에게 전달한다.</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">headConstraint</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="n">headBodyOffset</span><span class="p">;</span>

        <span class="c1">// 이 부분은 3D 캐릭터의 헤드 축에 따라서 수시로 변경되어야 한다.</span>
        <span class="c1">// Robot Kyle의 경우 머리는 정면이 녹색(y)축이므로 걸음에 up을 넣어준다.</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">forward</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">ProjectOnPlane</span><span class="p">(</span><span class="n">headConstraint</span><span class="p">.</span><span class="n">up</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">up</span><span class="p">).</span><span class="n">normalized</span><span class="p">,</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="n">turnSmoothness</span><span class="p">);</span>

        <span class="n">head</span><span class="p">.</span><span class="nf">Map</span><span class="p">();</span>
        <span class="n">leftHand</span><span class="p">.</span><span class="nf">Map</span><span class="p">();</span>
        <span class="n">rightHand</span><span class="p">.</span><span class="nf">Map</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="결과"><span class="mr-2">결과</span><a href="#결과" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>하체는 2부에서 제작할 예정 필요에 따라 할 수도~? <img data-src="https://user-images.githubusercontent.com/85896566/192703491-0f29e55a-ad92-44f6-b843-5087c0c48005.png" alt="image" data-proofer-ignore></p><h1 id="참고-사이트">참고 사이트</h1><ul><li><a href="https://youtu.be/tBYl-aSxUe0">Valem - VR에서 바디를 만드는 방법 - 1부</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/unity/'>Unity</a>, <a href='/categories/unity-vr/'>Unity VR</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/unity/" class="post-tag no-text-decoration" >Unity</a> <a href="/tags/unity-vr/" class="post-tag no-text-decoration" >Unity VR</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Unity+VR+Making+Body%28%EB%B0%94%EB%94%94+%EB%A6%AC%EA%B9%85+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0%29+-+Ugee%27s+Tech+Blog&url=https%3A%2F%2Fugee0810.github.io%2F%2Fposts%2FUnity-VR-Making-Body%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Unity+VR+Making+Body%28%EB%B0%94%EB%94%94+%EB%A6%AC%EA%B9%85+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0%29+-+Ugee%27s+Tech+Blog&u=https%3A%2F%2Fugee0810.github.io%2F%2Fposts%2FUnity-VR-Making-Body%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fugee0810.github.io%2F%2Fposts%2FUnity-VR-Making-Body%2F&text=Unity+VR+Making+Body%28%EB%B0%94%EB%94%94+%EB%A6%AC%EA%B9%85+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0%29+-+Ugee%27s+Tech+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Ugee0810/Ugee0810.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Algorithm-2/">Algorithm#02 | 버블 정렬(Bubble Sort)</a><li><a href="/posts/Algorithm-3/">Algorithm#03 | 삽입 정렬(Insertion Sort)</a><li><a href="/posts/Algorithm-1/">Algorithm#01 | 선택 정렬(Selection Sort)</a><li><a href="/posts/Algorithm-4/">Algorithm#04 | 퀵 정렬(Quick Sort)</a><li><a href="/posts/Unity-Event-2-Action/">Unity Event 2 - Action</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/unity/">Unity</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a> <a class="post-tag" href="/tags/grammar/">Grammar</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object Oriented Programming</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/boj/">BOJ</a> <a class="post-tag" href="/tags/cordingtest/">CordingTest</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Unity-VR-Keyboard/"><div class="card-body"> <em class="small" data-ts="1664895600" data-df="ll" > Oct 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>VR Keyboard | Unity Tutorial for Oculus Quest(유니티 XR 키보드 만들기)</h3><div class="text-muted small"><p> 준비물 세팅 아래의 패키지를 프로젝트에 임포트 Download VR Button Package 레이어 지정 아래 사진처럼 네 개의 레이어 지정 Tags and Layers Hands Interactive Typing Hands Keyboard Physics 키보드 제작 오브젝트 추가 빈 오브젝트(Keybo...</p></div></div></a></div><div class="card"> <a href="/posts/Data-Structure-01/"><div class="card-body"> <em class="small" data-ts="1662476400" data-df="ll" > Sep 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C# Data Structure#01 | Collections 자료구조 정리</h3><div class="text-muted small"><p> 자료구조의 중요성 자료구조는 데이터를 메모리에 저장하는것입니다. 데이터량이 많을 때 목적에 맞는 자료구조를 사용하지 않으면 엄청난 비용(속도, 메모리 낭비)의 손실을 가져오거나 심지어 프로그램, 서버가 다운될 수도 있습니다. 데이터가 빈번하게 추가되거나 선입선출 등의 우선순위가 있거나 특정 값(Key)로 데이터를 뽑아올 경우가 있거나 등의 목적에 ...</p></div></div></a></div><div class="card"> <a href="/posts/Grammar-01/"><div class="card-body"> <em class="small" data-ts="1662562800" data-df="ll" > Sep 8, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C# Grammar#01 | Switch</h3><div class="text-muted small"><p> Switch if - else 반복 줄임 가독성 높임 switch(n) 인수로는 기본적으로 정수와 문자를 넣을 수 있음 최근 C# 에서는 다른 타입의 객체도 넣을 수 있게끔 개선됐다. int choice = 0; switch(choice) { case 0: Console.Writ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Diary-220928/" class="btn btn-outline-primary" prompt="Older"><p>22-09-28(수)</p></a> <a href="/posts/Diary-220929/" class="btn btn-outline-primary" prompt="Newer"><p>22-09-29(목)</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/Ugee0810">송환욱(Song HwanUK)</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/unity/">Unity</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a> <a class="post-tag" href="/tags/grammar/">Grammar</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object Oriented Programming</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/boj/">BOJ</a> <a class="post-tag" href="/tags/cordingtest/">CordingTest</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5PMP919232"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5PMP919232'); }); </script>
